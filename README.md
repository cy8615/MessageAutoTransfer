# 消息转发器 - Message Auto Transfer

一个Android应用，用于将手机收到的所有通知消息自动转发到指定邮箱。

## 功能特点

- 🔄 **实时转发**: 自动监听所有应用的通知消息，实时转发到邮箱
- 📧 **邮件配置**: 支持自定义SMTP服务器配置，默认支持QQ邮箱
- 📊 **统计信息**: 显示今日转发数、总转发数等统计数据
- 📝 **历史记录**: 保存转发历史，支持查看详情和清空记录
- 🔒 **安全加密**: 敏感配置信息采用AES加密本地存储
- ⚡ **失败重试**: 邮件发送失败时自动重试3次
- 🎨 **现代UI**: 采用Material Design设计，界面简洁美观

## 系统要求

- Android 8.0 (API 26) 或更高版本
- 网络权限
- 通知访问权限

## 安装使用

### 1. 编译安装

```bash
# 克隆项目
git clone <repository-url>
cd MessageAutoTransfer

# 编译APK
./gradlew assembleDebug

# 安装到设备
adb install app/build/outputs/apk/debug/app-debug.apk
```

### 2. 配置邮箱

1. 打开应用，在"邮件配置"部分填写：
   - **SMTP服务器**: 如 `smtp.qq.com`
   - **端口**: 通常为 `587` (TLS) 或 `465` (SSL)
   - **发件人邮箱**: 用于发送转发邮件的邮箱地址
   - **邮箱密码/授权码**: 邮箱密码或第三方授权码
   - **收件人邮箱**: 接收转发邮件的邮箱地址

2. 点击"保存配置"按钮

### 3. 开启权限

1. 点击右上角的设置按钮
2. 在系统设置中找到"消息转发器"
3. 开启"通知使用权"

### 4. 启动服务

1. 返回应用主界面
2. 开启顶部的"转发状态"开关
3. 应用将开始监控所有通知消息并自动转发

## 邮箱配置说明

### QQ邮箱配置示例

- **SMTP服务器**: `smtp.qq.com`
- **端口**: `587`
- **加密方式**: `TLS`
- **发件人邮箱**: `your@qq.com`
- **授权码**: 在QQ邮箱设置中生成的授权码（不是登录密码）
- **收件人邮箱**: 任意有效邮箱地址

### 其他邮箱服务商

| 邮箱服务商 | SMTP服务器 | 端口 | 加密方式 |
|------------|------------|------|----------|
| 163邮箱    | smtp.163.com | 587 | TLS |
| Gmail      | smtp.gmail.com | 587 | TLS |
| Outlook    | smtp-mail.outlook.com | 587 | TLS |

## 转发邮件格式

转发的邮件格式如下：

```
主题: [应用名称] 通知标题

消息转发通知
==============================

发送应用: 微信
标题: 新消息
接收时间: 2023-12-01 14:30:25

内容:
您有一条新的微信消息

==============================
此邮件由消息转发器自动发送
```

## 隐私与安全

- 所有邮箱配置信息采用AES加密存储在本地
- 不会上传任何个人信息到云端
- 转发历史仅保存在本地设备
- 支持随时清空历史记录

## 技术架构

- **语言**: Kotlin
- **UI框架**: Material Design Components
- **邮件发送**: JavaMail API
- **数据存储**: EncryptedSharedPreferences
- **后台服务**: NotificationListenerService

## 权限说明

应用需要以下权限：

- `INTERNET`: 发送邮件需要网络权限
- `ACCESS_NETWORK_STATE`: 检查网络状态
- `BIND_NOTIFICATION_LISTENER_SERVICE`: 监听通知消息
- `FOREGROUND_SERVICE`: 后台服务运行
- `RECEIVE_BOOT_COMPLETED`: 开机自启动（可选）

## 常见问题

### Q: 为什么转发失败？
A: 请检查：
1. 网络连接是否正常
2. 邮箱配置是否正确
3. 邮箱是否开启了第三方访问权限
4. QQ邮箱需要使用授权码而非登录密码

### Q: 如何获取QQ邮箱授权码？
A: 
1. 登录QQ邮箱网页版
2. 进入设置 -> 账户
3. 开启POP3/SMTP服务
4. 生成授权码

### Q: 应用会消耗很多电量吗？
A: 应用采用被动监听方式，只有收到通知时才会处理，正常情况下电量消耗很少。

## 开发者信息

- 基于需求文档和页面参考开发
- 遵循Android开发最佳实践
- 采用MVVM架构模式
- 支持Android 8.0+

## 许可证

本项目仅供学习和个人使用。

---

**注意**: 请确保遵守相关法律法规，不要转发涉及隐私或敏感信息的消息。
