
<html lang='zh-CN'>
<head>
    <meta charset='UTF-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <style>
        .preview-suitable-app {
            overflow: visible;
            height: calc(100% - 20px);
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .app-border {
            transform-origin: center;
            position: relative;
            border-radius: 30px 30px 30px 30px;
        }
        .app-border::after {
            content: '';
            position: absolute;
            top: -4px;
            left: -4px;
            width: 100%;
            height: 100%;
            pointer-events: none;
            border: 4px solid rgb(51, 51, 51);
            border-radius: 30px 30px 30px 30px;
        }
        iframe {
            transform-origin: left top;
            border-radius: 26px;
            overflow: hidden;
        }
        .app-border-right {
            position: absolute;
            top: 259px;
            right: -15px;
        }
        .app-border-footer {
            width: 395px;
            height: 38px;
            position: absolute;
            bottom: 8px;
            left: -1px;
            border-radius: 0 0 16px 16px;
        }
        ::-webkit-scrollbar {
            width: 0px;
            background: #f1f1f1;
        }
    </style>
</head>
<body>
    <div id="preview-suitable-content-app" class="preview-suitable-app">
        <div class="app-border" style="width: 393px;height: 852px;transform:scale(0.6596244131455399);">
            <iframe id="iframe" class="vueIframeApp" style="border:none;width: 100%;height: 100%;"></iframe>
        </div>
    </div>
</body>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const html = "<html lang='zh-CN'>\n        <head >\n        <meta charset='UTF-8'/>\n<meta name='viewport' content='width=device-width, initial-scale=1.0'/>\n<title >短信转发器</title>\n<script src='https://res.gemcoder.com/js/reload.js'><\/script>\n<script src='https://cdn.tailwindcss.com'><\/script>\n<link href='https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css' rel='stylesheet'/>\n<script >tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#165DFF',\n                        secondary: '#36CFC9',\n                        success: '#52C41A',\n                        warning: '#FAAD14',\n                        danger: '#FF4D4F',\n                        dark: '#1D2129',\n                        'dark-2': '#4E5969',\n                        'light-1': '#F2F3F5',\n                        'light-2': '#E5E6EB',\n                        'light-3': '#C9CDD4'\n                    },\n                    fontFamily: {\n                        inter: ['Inter', 'system-ui', 'sans-serif'],\n                    },\n                }\n            }\n        }<\/script>\n<style type='text/tailwindcss'>\n        @layer utilities {\n            .content-auto {\n                content-visibility: auto;\n            }\n            .card-shadow {\n                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n            }\n            .btn-hover {\n                @apply transition-all duration-300 transform hover:scale-105 hover:shadow-lg;\n            }\n            .input-focus {\n                @apply focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all duration-200;\n            }\n        }\n    </style>\n    \n        <style>\n            ::-webkit-scrollbar { width: 0px; }\n        </style>\n    </head>\n<body class='font-inter bg-gray-50 text-dark min-h-screen'>\n        <!-- 顶部导航栏 -->\n<header class='bg-white shadow-sm sticky top-0 z-50'>\n        <div class='container mx-auto px-4 py-3 flex items-center justify-between'>\n        <div class='flex items-center space-x-2'>\n        <i class='fas fa-comment-dots text-primary text-2xl'>\n        </i>\n<h1 class='text-xl font-bold text-dark'>\n        短信转发器\n    </h1>\n    </div>\n<div class='flex items-center space-x-3'>\n        <button id='helpBtn' class='text-dark-2 hover:text-primary transition-colors'>\n        <i class='fas fa-question-circle text-lg'>\n        </i>\n    </button>\n<button id='settingsBtn' class='text-dark-2 hover:text-primary transition-colors'>\n        <i class='fas fa-cog text-lg'>\n        </i>\n    </button>\n    </div>\n    </div>\n    </header>\n<main class='container mx-auto px-4 py-5'>\n        <!-- 状态卡片 -->\n<div class='bg-white rounded-2xl p-5 mb-6 card-shadow'>\n        <div class='flex justify-between items-start mb-4'>\n        <div >\n        <h2 class='text-lg font-semibold text-dark'>\n        转发状态\n    </h2>\n<p class='text-dark-2 text-sm mt-1'>\n        实时监控短信转发服务\n    </p>\n    </div>\n<label class='relative inline-flex items-center cursor-pointer'>\n        <input type='checkbox' id='serviceToggle' class='sr-only peer'/>\n<div class='w-14 h-8 bg-light-2 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full after:content-[\"\"] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-7 after:w-7 after:transition-all peer-checked:bg-primary'>\n        </div>\n    </label>\n    </div>\n<div id='statusInfo' class='flex items-center p-3 rounded-xl bg-light-1'>\n        <div id='statusIndicator' class='w-3 h-3 rounded-full bg-danger mr-3'>\n        </div>\n<span id='statusText' class='text-dark-2'>\n        服务未运行\n    </span>\n<span id='lastActive' class='text-dark-2 text-sm ml-auto'>\n        上次活动: 从未\n    </span>\n    </div>\n<div class='mt-4 grid grid-cols-2 gap-3'>\n        <div class='bg-light-1 rounded-xl p-3'>\n        <p class='text-dark-2 text-xs'>\n        今日转发\n    </p>\n<p class='text-dark font-bold text-xl'>\n        0\n    </p>\n    </div>\n<div class='bg-light-1 rounded-xl p-3'>\n        <p class='text-dark-2 text-xs'>\n        总转发数\n    </p>\n<p class='text-dark font-bold text-xl'>\n        0\n    </p>\n    </div>\n    </div>\n    </div>\n<!-- 配置卡片 -->\n<div class='bg-white rounded-2xl p-5 mb-6 card-shadow'>\n        <h2 class='text-lg font-semibold text-dark mb-4'>\n        邮件配置\n    </h2>\n<form id='emailConfigForm' class='space-y-4'>\n        <div >\n        <label for='smtpServer' class='block text-sm font-medium text-dark-2 mb-1'>\n        SMTP服务器\n    </label>\n<div class='relative'>\n        <div class='absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none'>\n        <i class='fas fa-server text-light-3'>\n        </i>\n    </div>\n<input type='text' id='smtpServer' name='smtpServer' placeholder='smtp.example.com' class='block w-full pl-10 pr-3 py-3 border border-light-2 rounded-xl input-focus bg-light-1 border-0'/>\n    </div>\n    </div>\n<div class='grid grid-cols-2 gap-4'>\n        <div >\n        <label for='smtpPort' class='block text-sm font-medium text-dark-2 mb-1'>\n        端口\n    </label>\n<div class='relative'>\n        <div class='absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none'>\n        <i class='fas fa-plug text-light-3'>\n        </i>\n    </div>\n<input type='number' id='smtpPort' name='smtpPort' placeholder='587' class='block w-full pl-10 pr-3 py-3 border border-light-2 rounded-xl input-focus bg-light-1 border-0'/>\n    </div>\n    </div>\n<div >\n        <label for='encryption' class='block text-sm font-medium text-dark-2 mb-1'>\n        加密方式\n    </label>\n<div class='relative'>\n        <div class='absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none'>\n        <i class='fas fa-lock text-light-3'>\n        </i>\n    </div>\n<select id='encryption' name='encryption' class='block w-full pl-10 pr-10 py-3 border border-light-2 rounded-xl input-focus bg-light-1 border-0 appearance-none'>\n        <option value='tls'>\n        TLS\n    </option>\n<option value='ssl'>\n        SSL\n    </option>\n<option value='none'>\n        无\n    </option>\n    </select>\n<div class='absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none'>\n        <i class='fas fa-chevron-down text-light-3 text-xs'>\n        </i>\n    </div>\n    </div>\n    </div>\n    </div>\n<div >\n        <label for='senderEmail' class='block text-sm font-medium text-dark-2 mb-1'>\n        发件人邮箱\n    </label>\n<div class='relative'>\n        <div class='absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none'>\n        <i class='fas fa-envelope text-light-3'>\n        </i>\n    </div>\n<input type='email' id='senderEmail' name='senderEmail' placeholder='your@email.com' class='block w-full pl-10 pr-3 py-3 border border-light-2 rounded-xl input-focus bg-light-1 border-0'/>\n    </div>\n    </div>\n<div >\n        <label for='senderPassword' class='block text-sm font-medium text-dark-2 mb-1'>\n        邮箱密码/授权码\n    </label>\n<div class='relative'>\n        <div class='absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none'>\n        <i class='fas fa-key text-light-3'>\n        </i>\n    </div>\n<input type='password' id='senderPassword' name='senderPassword' placeholder='输入密码' class='block w-full pl-10 pr-10 py-3 border border-light-2 rounded-xl input-focus bg-light-1 border-0'/>\n<button type='button' id='togglePassword' class='absolute inset-y-0 right-0 flex items-center px-3 text-light-3 hover:text-primary'>\n        <i class='fas fa-eye-slash'>\n        </i>\n    </button>\n    </div>\n    </div>\n<div >\n        <label for='recipientEmail' class='block text-sm font-medium text-dark-2 mb-1'>\n        收件人邮箱\n    </label>\n<div class='relative'>\n        <div class='absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none'>\n        <i class='fas fa-envelope-open text-light-3'>\n        </i>\n    </div>\n<input type='email' id='recipientEmail' name='recipientEmail' placeholder='recipient@example.com' class='block w-full pl-10 pr-3 py-3 border border-light-2 rounded-xl input-focus bg-light-1 border-0'/>\n    </div>\n    </div>\n<button type='submit' class='w-full bg-primary hover:bg-primary/90 text-white font-medium py-3 px-4 rounded-xl transition-colors btn-hover flex items-center justify-center'>\n        <i class='fas fa-save mr-2'>\n        </i>\n保存配置\n    </button>\n    </form>\n    </div>\n<!-- 转发历史 -->\n<div class='bg-white rounded-2xl p-5 mb-6 card-shadow'>\n        <div class='flex justify-between items-center mb-5'>\n        <div >\n        <h2 class='text-lg font-semibold text-dark'>\n        转发历史\n    </h2>\n<p class='text-dark-2 text-sm mt-1'>\n        查看已转发的短信记录\n    </p>\n    </div>\n<button id='clearHistory' class='text-primary text-sm hover:underline'>\n        清空历史\n    </button>\n    </div>\n<div id='historyList' class='space-y-4'>\n        <!-- 历史记录为空状态 -->\n<div id='emptyHistory' class='py-12 flex flex-col items-center justify-center text-center'>\n        <img src='https://design.gemcoder.com/staticResource/echoAiSystemImages/34eee2061ae677e5be91c0f7fb63d7b9.png' alt='暂无历史记录' class='w-24 h-24 mb-4 opacity-50'/>\n<h3 class='text-dark font-medium mb-2'>\n        暂无转发记录\n    </h3>\n<p class='text-dark-2 text-sm max-w-xs'>\n        开启转发服务后，收到的短信将显示在这里\n    </p>\n    </div>\n<!-- 历史记录项示例 (默认隐藏) -->\n<div class='history-item hidden p-4 rounded-xl bg-light-1 border border-light-2'>\n        <div class='flex justify-between items-start mb-2'>\n        <span class='text-dark font-medium'>\n        发件人:\n<span class='sender'>\n        10086\n    </span>\n    </span>\n<span class='text-dark-2 text-xs'>\n        2023-05-15 14:30\n    </span>\n    </div>\n<p class='text-dark text-sm mb-3 content'>\n        您的验证码是123456，请勿泄露给他人。\n    </p>\n<div class='flex justify-between items-center'>\n        <span class='text-xs text-success'>\n        <i class='fas fa-check-circle mr-1'>\n        </i>\n转发成功\n    </span>\n<button class='text-primary text-xs hover:underline'>\n        查看详情\n    </button>\n    </div>\n    </div>\n    </div>\n<!-- 加载更多 -->\n<div class='mt-5 text-center'>\n        <button id='loadMore' class='text-primary text-sm hover:underline hidden'>\n        加载更多\n<i class='fas fa-chevron-down ml-1'>\n        </i>\n    </button>\n    </div>\n    </div>\n<!-- 功能说明卡片 -->\n<div class='bg-white rounded-2xl p-5 card-shadow'>\n        <h2 class='text-lg font-semibold text-dark mb-4'>\n        使用说明\n    </h2>\n<div class='space-y-4 text-dark-2 text-sm'>\n        <div class='flex'>\n        <div class='flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary mr-3 mt-0.5'>\n        1\n    </div>\n<p >\n        配置您的邮箱信息，包括SMTP服务器、端口和认证信息\n    </p>\n    </div>\n<div class='flex'>\n        <div class='flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary mr-3 mt-0.5'>\n        2\n    </div>\n<p >\n        开启顶部的转发开关，启动短信监控服务\n    </p>\n    </div>\n<div class='flex'>\n        <div class='flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary mr-3 mt-0.5'>\n        3\n    </div>\n<p >\n        所有收到的短信将自动转发至指定邮箱\n    </p>\n    </div>\n<div class='flex'>\n        <div class='flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary mr-3 mt-0.5'>\n        4\n    </div>\n<p >\n        转发历史记录将保存在本地，可随时查看\n    </p>\n    </div>\n    </div>\n    </div>\n    </main>\n<footer class='bg-white border-t border-light-2 py-4 mt-6'>\n        <div class='container mx-auto px-4 text-center text-dark-2 text-xs'>\n        <p >\n        短信转发器 v1.0.0 | 隐私政策 | 使用条款\n    </p>\n<p class='mt-1'>\n        © 2023 短信转发器. 保留所有权利\n    </p>\n    </div>\n    </footer>\n<!-- 帮助弹窗 -->\n<div id='helpModal' class='fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden'>\n        <div class='bg-white rounded-2xl w-full max-w-md mx-4 max-h-[80vh] overflow-y-auto'>\n        <div class='p-5 border-b border-light-2 flex justify-between items-center sticky top-0 bg-white z-10'>\n        <h3 class='text-lg font-bold text-dark'>\n        帮助中心\n    </h3>\n<button id='closeHelp' class='text-dark-2 hover:text-primary'>\n        <i class='fas fa-times'>\n        </i>\n    </button>\n    </div>\n<div class='p-5 space-y-4'>\n        <div >\n        <h4 class='font-medium text-dark mb-2'>\n        如何获取SMTP服务器信息？\n    </h4>\n<p class='text-dark-2 text-sm'>\n        通常您的邮箱服务提供商(如Gmail、QQ邮箱等)会提供SMTP服务器信息，您可以在邮箱设置中查找相关配置。\n    </p>\n    </div>\n<div >\n        <h4 class='font-medium text-dark mb-2'>\n        什么是授权码？\n    </h4>\n<p class='text-dark-2 text-sm'>\n        授权码是某些邮箱服务商(如QQ邮箱、网易邮箱)提供的第三方应用专用密码，用于替代原密码增强安全性。\n    </p>\n    </div>\n<div >\n        <h4 class='font-medium text-dark mb-2'>\n        为什么转发失败？\n    </h4>\n<p class='text-dark-2 text-sm'>\n        请检查您的网络连接、邮箱配置是否正确，以及邮箱是否开启了第三方访问权限。\n    </p>\n    </div>\n<div >\n        <h4 class='font-medium text-dark mb-2'>\n        如何查看详细日志？\n    </h4>\n<p class='text-dark-2 text-sm'>\n        在设置页面中，您可以找到\"查看日志\"选项，查看详细的转发记录和错误信息。\n    </p>\n    </div>\n    </div>\n<div class='p-5 border-t border-light-2'>\n        <button id='contactSupport' class='w-full bg-primary/10 hover:bg-primary/20 text-primary font-medium py-3 px-4 rounded-xl transition-colors'>\n        <i class='fas fa-life-ring mr-2'>\n        </i>\n联系支持\n    </button>\n    </div>\n    </div>\n    </div>\n<!-- 配置保存成功提示 -->\n<div id='toast' class='fixed bottom-5 right-5 bg-success text-white px-4 py-3 rounded-xl shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 flex items-center'>\n        <i class='fas fa-check-circle mr-2'>\n        </i>\n<span >\n        配置保存成功\n    </span>\n    </div>\n<script >// 页面加载完成后初始化\n        document.addEventListener('DOMContentLoaded', () => {\n            // 获取DOM元素\n            const serviceToggle = document.getElementById('serviceToggle');\n            const statusIndicator = document.getElementById('statusIndicator');\n            const statusText = document.getElementById('statusText');\n            const lastActive = document.getElementById('lastActive');\n            const emailConfigForm = document.getElementById('emailConfigForm');\n            const togglePassword = document.getElementById('togglePassword');\n            const senderPassword = document.getElementById('senderPassword');\n            const helpBtn = document.getElementById('helpBtn');\n            const helpModal = document.getElementById('helpModal');\n            const closeHelp = document.getElementById('closeHelp');\n            const toast = document.getElementById('toast');\n            const clearHistory = document.getElementById('clearHistory');\n            const emptyHistory = document.getElementById('emptyHistory');\n            const historyList = document.getElementById('historyList');\n            \n            // 初始化应用状态\n            let appState = {\n                serviceRunning: false,\n                lastActiveTime: null,\n                forwardCount: 0,\n                todayCount: 0,\n                config: {\n                    smtpServer: '',\n                    smtpPort: '',\n                    encryption: 'tls',\n                    senderEmail: '',\n                    senderPassword: '',\n                    recipientEmail: ''\n                },\n                history: []\n            };\n            \n            // 从本地存储加载数据\n            function loadFromStorage() {\n                const savedState = localStorage.getItem('smsForwarderState');\n                if (savedState) {\n                    const parsedState = JSON.parse(savedState);\n                    appState = { ...appState, ...parsedState };\n                    \n                    // 更新UI\n                    serviceToggle.checked = appState.serviceRunning;\n                    updateServiceStatus();\n                    \n                    // 填充表单\n                    if (appState.config) {\n                        document.getElementById('smtpServer').value = appState.config.smtpServer || '';\n                        document.getElementById('smtpPort').value = appState.config.smtpPort || '';\n                        document.getElementById('encryption').value = appState.config.encryption || 'tls';\n                        document.getElementById('senderEmail').value = appState.config.senderEmail || '';\n                        document.getElementById('senderPassword').value = appState.config.senderPassword || '';\n                        document.getElementById('recipientEmail').value = appState.config.recipientEmail || '';\n                    }\n                    \n                    // 更新历史记录\n                    renderHistory();\n                }\n            }\n            \n            // 保存数据到本地存储\n            function saveToStorage() {\n                localStorage.setItem('smsForwarderState', JSON.stringify(appState));\n            }\n            \n            // 更新服务状态UI\n            function updateServiceStatus() {\n                if (appState.serviceRunning) {\n                    statusIndicator.className = 'w-3 h-3 rounded-full bg-success mr-3';\n                    statusText.textContent = '服务运行中';\n                    \n                    // 更新最后活动时间\n                    if (appState.lastActiveTime) {\n                        const date = new Date(appState.lastActiveTime);\n                        lastActive.textContent = \`上次活动: \${formatDate(date)}\`;\n                    }\n                } else {\n                    statusIndicator.className = 'w-3 h-3 rounded-full bg-danger mr-3';\n                    statusText.textContent = '服务未运行';\n                }\n            }\n            \n            // 格式化日期\n            function formatDate(date) {\n                const now = new Date();\n                const diff = Math.floor((now - date) / (1000 * 60)); // 分钟差\n                \n                if (diff < 1) return '刚刚';\n                if (diff < 60) return \`\${diff}分钟前\`;\n                \n                const hours = Math.floor(diff / 60);\n                if (hours < 24) return \`\${hours}小时前\`;\n                \n                const days = Math.floor(hours / 24);\n                if (days < 30) return \`\${days}天前\`;\n                \n                return \`\${date.getFullYear()}-\${(date.getMonth() + 1).toString().padStart(2, '0')}-\${date.getDate().toString().padStart(2, '0')}\`;\n            }\n            \n            // 显示提示消息\n            function showToast(message) {\n                const toastText = toast.querySelector('span');\n                toastText.textContent = message;\n                \n                toast.classList.remove('translate-y-20', 'opacity-0');\n                toast.classList.add('translate-y-0', 'opacity-100');\n                \n                setTimeout(() => {\n                    toast.classList.remove('translate-y-0', 'opacity-100');\n                    toast.classList.add('translate-y-20', 'opacity-0');\n                }, 3000);\n            }\n            \n            // 渲染历史记录\n            function renderHistory() {\n                // 清除现有记录(保留空状态提示)\n                const historyItems = document.querySelectorAll('.history-item:not(.hidden)');\n                historyItems.forEach(item => item.remove());\n                \n                if (appState.history && appState.history.length > 0) {\n                    emptyHistory.classList.add('hidden');\n                    \n                    // 显示最近的5条记录\n                    const recentHistory = [...appState.history].reverse().slice(0, 5);\n                    \n                    recentHistory.forEach(item => {\n                        const historyItem = document.querySelector('.history-item.hidden').cloneNode(true);\n                        historyItem.classList.remove('hidden');\n                        \n                        historyItem.querySelector('.sender').textContent = item.sender;\n                        historyItem.querySelector('.content').textContent = item.content;\n                        historyItem.querySelector('.text-xs.text-success').textContent = item.status === 'success' \n                            ? '转发成功' \n                            : \`转发失败: \${item.error}\`;\n                        \n                        const date = new Date(item.timestamp);\n                        historyItem.querySelector('.text-dark-2.text-xs').textContent = \`\${date.getMonth() + 1}月\${date.getDate()}日 \${date.getHours().toString().padStart(2, '0')}:\${date.getMinutes().toString().padStart(2, '0')}\`;\n                        \n                        historyList.appendChild(historyItem);\n                    });\n                    \n                    // 显示加载更多按钮(如果有更多记录)\n                    document.getElementById('loadMore').classList.toggle('hidden', appState.history.length <= 5);\n                } else {\n                    emptyHistory.classList.remove('hidden');\n                    document.getElementById('loadMore').classList.add('hidden');\n                }\n            }\n            \n            // 服务开关切换\n            serviceToggle.addEventListener('change', function() {\n                appState.serviceRunning = this.checked;\n                \n                // 检查配置是否完整\n                if (appState.serviceRunning) {\n                    const config = appState.config;\n                    if (!config.smtpServer || !config.smtpPort || !config.senderEmail || !config.senderPassword || !config.recipientEmail) {\n                        showToast('请先填写完整的邮箱配置');\n                        this.checked = false;\n                        appState.serviceRunning = false;\n                    } else {\n                        appState.lastActiveTime = new Date().toISOString();\n                        showToast('转发服务已启动');\n                    }\n                } else {\n                    showToast('转发服务已停止');\n                }\n                \n                updateServiceStatus();\n                saveToStorage();\n            });\n            \n            // 表单提交\n            emailConfigForm.addEventListener('submit', function(e) {\n                e.preventDefault();\n                \n                // 保存配置\n                appState.config = {\n                    smtpServer: document.getElementById('smtpServer').value,\n                    smtpPort: document.getElementById('smtpPort').value,\n                    encryption: document.getElementById('encryption').value,\n                    senderEmail: document.getElementById('senderEmail').value,\n                    senderPassword: document.getElementById('senderPassword').value,\n                    recipientEmail: document.getElementById('recipientEmail').value\n                };\n                \n                saveToStorage();\n                showToast('配置保存成功');\n            });\n            \n            // 密码显示切换\n            togglePassword.addEventListener('click', function() {\n                const type = senderPassword.getAttribute('type') === 'password' ? 'text' : 'password';\n                senderPassword.setAttribute('type', type);\n                \n                // 切换图标\n                this.querySelector('i').classList.toggle('fa-eye');\n                this.querySelector('i').classList.toggle('fa-eye-slash');\n            });\n            \n            // 帮助模态框\n            helpBtn.addEventListener('click', () => {\n                helpModal.classList.remove('hidden');\n                document.body.style.overflow = 'hidden';\n            });\n            \n            closeHelp.addEventListener('click', () => {\n                helpModal.classList.add('hidden');\n                document.body.style.overflow = '';\n            });\n            \n            // 点击模态框外部关闭\n            helpModal.addEventListener('click', (e) => {\n                if (e.target === helpModal) {\n                    helpModal.classList.add('hidden');\n                    document.body.style.overflow = '';\n                }\n            });\n            \n            // 清空历史记录\n            clearHistory.addEventListener('click', () => {\n                if (confirm('确定要清空所有转发历史吗？此操作不可恢复。')) {\n                    appState.history = [];\n                    saveToStorage();\n                    renderHistory();\n                    showToast('历史记录已清空');\n                }\n            });\n            \n            // 初始化应用\n            loadFromStorage();\n        });<\/script>\n    </body>\n    </html>";
        iframe.srcdoc = html;
    });
</script>
</html>
